<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="description"
      content="Explore smart, easy-to-use budgeting calculators on My Super Calculators."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Super Calculators – Home</title>
    <link rel="stylesheet" href="css/base.css" />
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to main content</a>

    <header>
      <nav class="nav" aria-label="Primary">
        <a href="index.html" class="nav-brand">My Super Calculators</a>
        <div class="nav-links">
          <a href="index.html" aria-current="page">Home</a>
          <a href="calculators.html">Calculators</a>
          <a href="stories.html">Stories</a>
        </div>
      </nav>
    </header>

    <main id="main">
      <div class="welcome-blurb">
        <strong>Welcome!</strong>
        Our tools are designed to help you understand your spending,
        explore money-saving opportunities, and take control of your budget —
        all in a simple, mobile-friendly way.
      </div>

      <div class="spotlight-label">
        <span>⭐</span>
        <span>Spotlight calculator of the month</span>
      </div>

      <!-- Spotlight Card -->
      <section class="card" aria-label="Smart Budget Percentages spotlight">
        <h1>Smart Budget Percentages</h1>

        <div id="smart-budget-embed">
          <!-- Calculator UI will be embedded here -->
        </div>
      </section>
    </main>

    <footer>
      <p>
        These tools are provided for general information and entertainment
        purposes only and do not constitute financial, legal, or tax advice. We
        are not a fiduciary and do not make recommendations based on your
        personal financial situation. Please consult a qualified professional
        for advice tailored to your needs.
      </p>
    </footer>

    <script src="js/utils.js"></script>
    <script src="calculators/smart-budget/smart-budget.js"></script>
    <script>
      // Fetch the calculator markup from its own page and embed it
      (function () {
        const container = document.getElementById("smart-budget-embed");
        if (!container) return;

        fetch("calculators/smart-budget/index.html")
          .then((response) => response.text())
          .then((html) => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");
            const section = doc.querySelector("#smart-budget");
            if (!section) return;

            // Remove the internal H1 so we don't get duplicate headings
            const internalH1 = section.querySelector("h1");
            if (internalH1) internalH1.remove();

            // Remove the "back" link since we removed that too
            const backLink = section.querySelector(".muted a");
            if (backLink) backLink.parentElement.remove();

            container.appendChild(section);

            // Initialize calculator inside this container
            if (window.SmartBudget) {
              SmartBudget.init(container);
            }
          })
          .catch((err) => {
            console.error("Failed to embed calculator:", err);
          });
      })();
    </script>
  </body>
</html>
