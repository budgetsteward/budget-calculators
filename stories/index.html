<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="description"
      content="Read budgeting stories inside the My Super Calculators website."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Story Viewer – My Super Calculators</title>
    <link rel="stylesheet" href="../css/base.css" />

    <style>
      /* Local styling just for this viewer */
      .story-hero {
        background: linear-gradient(to right, #1f2937, #111827);
        color: #e5e7eb;
        border-radius: 18px 18px 12px 12px;
        padding: 0.9rem 1.2rem 1rem;
        margin: -0.1rem -0.2rem 1rem -0.2rem;
      }

      .story-hero p,
      .story-hero h2 {
        color: #e5e7eb;
        margin-bottom: 0.35rem;
      }

      .story-hero h2 {
        font-size: 1.3rem;
      }

      .story-hero .item-card-meta {
        opacity: 0.9;
      }

      /* Injected HTML story container */
      #story-content {
        margin-top: 0.25rem;
      }

      /* When we inject story HTML, it often includes an article.card.
         We’re unwrapping it in JS, but this also protects against “card inside card”. */
      #story-content .card {
        box-shadow: none;
        border: none;
        padding: 0;
        background: transparent;
      }

      /* Wrapper restores "polished" look for injected HTML stories */
      .story-injected-wrap {
        background: #fff;
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1rem 1rem 1.25rem;
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.06);
      }

      /* Make sure injected content behaves nicely */
      .story-injected-wrap img {
        max-width: 100%;
        height: auto;
      }

    </style>
  </head>

  <body>
    <a class="skip-link" href="#main">Skip to main content</a>

    <header>
      <nav class="nav" aria-label="Primary">
        <a href="../index.html" class="nav-brand">My Super Calculators</a>
        <div class="nav-links">
          <a href="../index.html">Home</a>
          <a href="../calculators.html">Calculators</a>
          <a href="../news.html" aria-current="page">News</a>
        </div>
      </nav>
    </header>

    <!-- Screen-reader-only live region for error messages -->
    <div
      id="global-status"
      aria-live="polite"
      style="
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      "
    ></div>

    <main id="main">
      <section aria-labelledby="story-title">
        <article class="card">
          <div class="story-hero">
            <p class="item-card-meta" id="story-category"></p>
            <h2 id="story-title"></h2>
            <p class="item-card-body" id="story-description"></p>
          </div>

          <!-- HTML story content (injected). This is the iOS scroll fix. -->
          <div id="story-content" style="display: none;"></div>

          <!-- PDF fallback (iframe only used if no HTML). -->
          <div
            id="story-frame-wrapper"
            style="
              margin-top: 0.25rem;
              border-radius: 10px;
              overflow: hidden;
              border: 1px solid var(--border);
              background: #ffffff;
              height: 70vh;
              display: none;
            "
          >
            <iframe
              id="story-frame"
              title="Story content"
              style="width: 100%; height: 100%; border: none;"
            ></iframe>
          </div>

          <p class="item-card-meta" id="story-download" style="margin-top: 0.75rem;">
            <a id="story-download-link" href="#" download>
              Download this story as a PDF
            </a>
          </p>

          <p class="item-card-meta" id="story-status" aria-live="polite"></p>
        </article>
      </section>
    </main>

    <footer>
      <p>
        These tools and stories are provided for general information and
        entertainment purposes only and do not constitute financial, legal, or
        tax advice. We are not a fiduciary and do not make recommendations based
        on your personal financial situation. Please consult a qualified
        professional for advice tailored to your needs.
      </p>
    </footer>

    <script src="../js/utils.js"></script>
    <script src="../js/story-viewer.js"></script>
  </body>
</html>
